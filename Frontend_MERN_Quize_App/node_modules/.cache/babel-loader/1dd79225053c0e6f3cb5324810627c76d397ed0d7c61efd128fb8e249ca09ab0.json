{"ast":null,"code":"// import React, { useEffect, useState, useRef } from \"react\";\n// import { useLocation } from \"react-router-dom\";\n// import axios from \"axios\";\n// const QuizResults = () => {\n//   const location = useLocation();\n//   const { quiz, answers, user } = location.state;\n//   const [resultsSaved, setResultsSaved] = useState(false); // Flag to track if results are saved\n//   const saveResultsCalled = useRef(false); // Ref to track if saveResults has been called\n//   // Calculate the score\n//   const score = quiz.questions.reduce((acc, question, index) => {\n//     const correctAnswer = question.options.find(opt => opt.isCorrect)?.text;\n//     if (answers[index] === correctAnswer) {\n//       return acc + 1;\n//     }\n//     return acc;\n//   }, 0);\n//   useEffect(() => {\n//     // Save the results to the database\n//     const saveResults = async () => {\n//       try {\n//         const userName = user?.name || \"Default User\"; // Provide a default user name if undefined\n//         console.log(\"Sending data to server:\", { user: userName, category: quiz.category, score: score });\n//         await axios.post(\"http://localhost:4000/quiz/save-results\", {\n//           user: userName,\n//           category: quiz.category,\n//           score: score,\n//         });\n//         console.log(\"Results saved successfully\");\n//         setResultsSaved(true); // Set the flag to true after saving results\n//       } catch (error) {\n//         console.error(\"Error saving results:\", error);\n//       }\n//     };\n//     if (!resultsSaved && !saveResultsCalled.current) {\n//       saveResultsCalled.current = true; // Set the ref to true to prevent multiple calls\n//       saveResults();\n//     }\n//   }, [quiz.category, score, user, resultsSaved]);\n//   return (\n//     <div className=\"flex flex-col min-h-screen\">\n//       <div className=\"container mx-auto p-8 flex-grow\">\n//         <h1 className=\"text-3xl font-bold mb-6\">Quiz Results</h1>\n//         <h2 className=\"text-xl font-bold mb-4\">{quiz.title}</h2>\n//         <p className=\"text-gray-600 mb-4\">Difficulty: {quiz.difficulty}</p>\n//         <p className=\"text-2xl font-bold mb-4\">Your Score: {score} / {quiz.questions.length}</p>\n//         {quiz.questions.map((question, index) => (\n//           <div key={index} className=\"mb-8 p-4 bg-white shadow-lg rounded-lg\">\n//             <h3 className=\"text-lg font-semibold\">{index + 1}. {question.title}</h3>\n//             <p><strong>Your Answer:</strong> {answers[index]}</p>\n//             <p><strong>Correct Answer:</strong> {question.options.find(opt => opt.isCorrect)?.text || \"No correct answer available\"}</p>\n//           </div>\n//         ))}\n//       </div>\n//       <footer className=\"bg-gray-800 text-white p-4 text-center mt-auto\">\n//         <p>&copy; 2025 Quiz App. All rights reserved.</p>\n//       </footer>\n//     </div>\n//   );\n// };\n// export default QuizResults;\nimport React,{useEffect,useState,useRef}from\"react\";import{useLocation}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const QuizResults=()=>{const location=useLocation();const{quiz,answers,user}=location.state;const[resultsSaved,setResultsSaved]=useState(false);// Flag to track if results are saved\nconst saveResultsCalled=useRef(false);// Ref to track if saveResults has been called\n// Calculate the score\nconst correctAnswers=quiz.questions.reduce((acc,question,index)=>{var _question$options$fin;const correctAnswer=(_question$options$fin=question.options.find(opt=>opt.isCorrect))===null||_question$options$fin===void 0?void 0:_question$options$fin.text;if(answers[index]===correctAnswer){return acc+1;}return acc;},0);const totalQuestions=quiz.questions.length;const percentage=(correctAnswers/totalQuestions*100).toFixed(2);useEffect(()=>{// Save the results to the database\nconst saveResults=async()=>{try{const userName=(user===null||user===void 0?void 0:user.name)||\"Default User\";// Provide a default user name if undefined\nconst email=(user===null||user===void 0?void 0:user.email)||\"default@example.com\";// Provide a default email if undefined\nconsole.log(\"Sending data to server:\",{userId:user.id,userName,email,category:quiz.category,totalQuestions,correctAnswers,percentage});await axios.post(\"http://localhost:4000/quiz/save-results\",{userId:user.id,userName,email,category:quiz.category,totalQuestions,correctAnswers,percentage});console.log(\"Results saved successfully\");setResultsSaved(true);// Set the flag to true after saving results\n}catch(error){console.error(\"Error saving results:\",error);}};if(!resultsSaved&&!saveResultsCalled.current){saveResultsCalled.current=true;// Set the ref to true to prevent multiple calls\nsaveResults();}},[quiz.category,totalQuestions,correctAnswers,percentage,user,resultsSaved]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col min-h-screen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-8 flex-grow\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-6\",children:\"Quiz Results\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:quiz.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-4\",children:[\"Difficulty: \",quiz.difficulty]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold mb-4\",children:[\"Your Score: \",correctAnswers,\" / \",totalQuestions]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold mb-4\",children:[\"Percentage: \",percentage,\"%\"]}),quiz.questions.map((question,index)=>{var _question$options$fin2;return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 p-4 bg-white shadow-lg rounded-lg\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold\",children:[index+1,\". \",question.title]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Your Answer:\"}),\" \",answers[index]]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Correct Answer:\"}),\" \",((_question$options$fin2=question.options.find(opt=>opt.isCorrect))===null||_question$options$fin2===void 0?void 0:_question$options$fin2.text)||\"No correct answer available\"]})]},index);})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"bg-gray-800 text-white p-4 text-center mt-auto\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\xA9 2025 Quiz App. All rights reserved.\"})})]});};export default QuizResults;","map":{"version":3,"names":["React","useEffect","useState","useRef","useLocation","axios","jsx","_jsx","jsxs","_jsxs","QuizResults","location","quiz","answers","user","state","resultsSaved","setResultsSaved","saveResultsCalled","correctAnswers","questions","reduce","acc","question","index","_question$options$fin","correctAnswer","options","find","opt","isCorrect","text","totalQuestions","length","percentage","toFixed","saveResults","userName","name","email","console","log","userId","id","category","post","error","current","className","children","title","difficulty","map","_question$options$fin2"],"sources":["C:/Users/RAGHAVENDRA/Downloads/MERN-Quiz-App-main/MERN-Quiz-App-main/Frontend_MERN_Quize_App/src/Pages/QuizResults.jsx"],"sourcesContent":["// import React, { useEffect, useState, useRef } from \"react\";\r\n// import { useLocation } from \"react-router-dom\";\r\n// import axios from \"axios\";\r\n\r\n// const QuizResults = () => {\r\n//   const location = useLocation();\r\n//   const { quiz, answers, user } = location.state;\r\n//   const [resultsSaved, setResultsSaved] = useState(false); // Flag to track if results are saved\r\n//   const saveResultsCalled = useRef(false); // Ref to track if saveResults has been called\r\n\r\n//   // Calculate the score\r\n//   const score = quiz.questions.reduce((acc, question, index) => {\r\n//     const correctAnswer = question.options.find(opt => opt.isCorrect)?.text;\r\n//     if (answers[index] === correctAnswer) {\r\n//       return acc + 1;\r\n//     }\r\n//     return acc;\r\n//   }, 0);\r\n\r\n//   useEffect(() => {\r\n//     // Save the results to the database\r\n//     const saveResults = async () => {\r\n//       try {\r\n//         const userName = user?.name || \"Default User\"; // Provide a default user name if undefined\r\n//         console.log(\"Sending data to server:\", { user: userName, category: quiz.category, score: score });\r\n//         await axios.post(\"http://localhost:4000/quiz/save-results\", {\r\n//           user: userName,\r\n//           category: quiz.category,\r\n//           score: score,\r\n//         });\r\n//         console.log(\"Results saved successfully\");\r\n//         setResultsSaved(true); // Set the flag to true after saving results\r\n//       } catch (error) {\r\n//         console.error(\"Error saving results:\", error);\r\n//       }\r\n//     };\r\n\r\n//     if (!resultsSaved && !saveResultsCalled.current) {\r\n//       saveResultsCalled.current = true; // Set the ref to true to prevent multiple calls\r\n//       saveResults();\r\n//     }\r\n//   }, [quiz.category, score, user, resultsSaved]);\r\n\r\n//   return (\r\n//     <div className=\"flex flex-col min-h-screen\">\r\n//       <div className=\"container mx-auto p-8 flex-grow\">\r\n//         <h1 className=\"text-3xl font-bold mb-6\">Quiz Results</h1>\r\n//         <h2 className=\"text-xl font-bold mb-4\">{quiz.title}</h2>\r\n//         <p className=\"text-gray-600 mb-4\">Difficulty: {quiz.difficulty}</p>\r\n//         <p className=\"text-2xl font-bold mb-4\">Your Score: {score} / {quiz.questions.length}</p>\r\n\r\n//         {quiz.questions.map((question, index) => (\r\n//           <div key={index} className=\"mb-8 p-4 bg-white shadow-lg rounded-lg\">\r\n//             <h3 className=\"text-lg font-semibold\">{index + 1}. {question.title}</h3>\r\n//             <p><strong>Your Answer:</strong> {answers[index]}</p>\r\n//             <p><strong>Correct Answer:</strong> {question.options.find(opt => opt.isCorrect)?.text || \"No correct answer available\"}</p>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//       <footer className=\"bg-gray-800 text-white p-4 text-center mt-auto\">\r\n//         <p>&copy; 2025 Quiz App. All rights reserved.</p>\r\n//       </footer>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default QuizResults;\r\n\r\n\r\n\r\n\r\n\r\n\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nconst QuizResults = () => {\r\n  const location = useLocation();\r\n  const { quiz, answers, user } = location.state;\r\n  const [resultsSaved, setResultsSaved] = useState(false); // Flag to track if results are saved\r\n  const saveResultsCalled = useRef(false); // Ref to track if saveResults has been called\r\n\r\n  // Calculate the score\r\n  const correctAnswers = quiz.questions.reduce((acc, question, index) => {\r\n    const correctAnswer = question.options.find((opt) => opt.isCorrect)?.text;\r\n    if (answers[index] === correctAnswer) {\r\n      return acc + 1;\r\n    }\r\n    return acc;\r\n  }, 0);\r\n\r\n  const totalQuestions = quiz.questions.length;\r\n  const percentage = ((correctAnswers / totalQuestions) * 100).toFixed(2);\r\n\r\n  useEffect(() => {\r\n    // Save the results to the database\r\n    const saveResults = async () => {\r\n      try {\r\n        const userName = user?.name || \"Default User\"; // Provide a default user name if undefined\r\n        const email = user?.email || \"default@example.com\"; // Provide a default email if undefined\r\n        console.log(\"Sending data to server:\", {\r\n          userId: user.id,\r\n          userName,\r\n          email,\r\n          category: quiz.category,\r\n          totalQuestions,\r\n          correctAnswers,\r\n          percentage,\r\n        });\r\n\r\n        await axios.post(\"http://localhost:4000/quiz/save-results\", {\r\n          userId: user.id,\r\n          userName,\r\n          email,\r\n          category: quiz.category,\r\n          totalQuestions,\r\n          correctAnswers,\r\n          percentage,\r\n        });\r\n\r\n        console.log(\"Results saved successfully\");\r\n        setResultsSaved(true); // Set the flag to true after saving results\r\n      } catch (error) {\r\n        console.error(\"Error saving results:\", error);\r\n      }\r\n    };\r\n\r\n    if (!resultsSaved && !saveResultsCalled.current) {\r\n      saveResultsCalled.current = true; // Set the ref to true to prevent multiple calls\r\n      saveResults();\r\n    }\r\n  }, [quiz.category, totalQuestions, correctAnswers, percentage, user, resultsSaved]);\r\n\r\n  return (\r\n    <div className=\"flex flex-col min-h-screen\">\r\n      <div className=\"container mx-auto p-8 flex-grow\">\r\n        <h1 className=\"text-3xl font-bold mb-6\">Quiz Results</h1>\r\n        <h2 className=\"text-xl font-bold mb-4\">{quiz.title}</h2>\r\n        <p className=\"text-gray-600 mb-4\">Difficulty: {quiz.difficulty}</p>\r\n        <p className=\"text-2xl font-bold mb-4\">Your Score: {correctAnswers} / {totalQuestions}</p>\r\n        <p className=\"text-xl font-bold mb-4\">Percentage: {percentage}%</p>\r\n\r\n        {quiz.questions.map((question, index) => (\r\n          <div key={index} className=\"mb-8 p-4 bg-white shadow-lg rounded-lg\">\r\n            <h3 className=\"text-lg font-semibold\">\r\n              {index + 1}. {question.title}\r\n            </h3>\r\n            <p>\r\n              <strong>Your Answer:</strong> {answers[index]}\r\n            </p>\r\n            <p>\r\n              <strong>Correct Answer:</strong>{\" \"}\r\n              {question.options.find((opt) => opt.isCorrect)?.text || \"No correct answer available\"}\r\n            </p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <footer className=\"bg-gray-800 text-white p-4 text-center mt-auto\">\r\n        <p>&copy; 2025 Quiz App. All rights reserved.</p>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuizResults;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}