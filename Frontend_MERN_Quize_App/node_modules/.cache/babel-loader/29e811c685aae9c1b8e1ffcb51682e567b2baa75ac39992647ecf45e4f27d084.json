{"ast":null,"code":"import React from\"react\";import{Navigate}from\"react-router-dom\";import{jwtDecode}from\"jwt-decode\";// Incorrect\nimport{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,requiredRole}=_ref;const token=localStorage.getItem(\"token\");if(!token){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}try{const decodedToken=jwtDecode(token);// Check if the token is expired\nconst currentTime=Date.now()/1000;if(decodedToken.exp<currentTime){localStorage.removeItem(\"token\");return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// Check if the user has the required role\nif(requiredRole&&decodedToken.role!==requiredRole){return/*#__PURE__*/_jsx(Navigate,{to:\"/unauthorized\",replace:true});}return children;}catch(error){localStorage.removeItem(\"token\");return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","jwtDecode","jsx","_jsx","ProtectedRoute","_ref","children","requiredRole","token","localStorage","getItem","to","replace","decodedToken","currentTime","Date","now","exp","removeItem","role","error"],"sources":["C:/Users/RAGHAVENDRA/Downloads/MERN-Quiz-App-main/MERN-Quiz-App-main/Frontend_MERN_Quize_App/src/Components/ProtectedRoute.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { jwtDecode } from \"jwt-decode\"; // Incorrect\r\n\r\nconst ProtectedRoute = ({ children, requiredRole }) => {\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  if (!token) {\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  try {\r\n    const decodedToken = jwtDecode(token);\r\n\r\n    // Check if the token is expired\r\n    const currentTime = Date.now() / 1000;\r\n    if (decodedToken.exp < currentTime) {\r\n      localStorage.removeItem(\"token\");\r\n      return <Navigate to=\"/login\" replace />;\r\n    }\r\n\r\n    // Check if the user has the required role\r\n    if (requiredRole && decodedToken.role !== requiredRole) {\r\n      return <Navigate to=\"/unauthorized\" replace />;\r\n    }\r\n\r\n    return children;\r\n  } catch (error) {\r\n    localStorage.removeItem(\"token\");\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n};\r\n\r\nexport default ProtectedRoute;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,SAAS,KAAQ,YAAY,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBAExC,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAgC,IAA/B,CAAEC,QAAQ,CAAEC,YAAa,CAAC,CAAAF,IAAA,CAChD,KAAM,CAAAG,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,GAAI,CAACF,KAAK,CAAE,CACV,mBAAOL,IAAA,CAACH,QAAQ,EAACW,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CAEA,GAAI,CACF,KAAM,CAAAC,YAAY,CAAGZ,SAAS,CAACO,KAAK,CAAC,CAErC;AACA,KAAM,CAAAM,WAAW,CAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAG,IAAI,CACrC,GAAIH,YAAY,CAACI,GAAG,CAAGH,WAAW,CAAE,CAClCL,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC,CAChC,mBAAOf,IAAA,CAACH,QAAQ,EAACW,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CAEA;AACA,GAAIL,YAAY,EAAIM,YAAY,CAACM,IAAI,GAAKZ,YAAY,CAAE,CACtD,mBAAOJ,IAAA,CAACH,QAAQ,EAACW,EAAE,CAAC,eAAe,CAACC,OAAO,MAAE,CAAC,CAChD,CAEA,MAAO,CAAAN,QAAQ,CACjB,CAAE,MAAOc,KAAK,CAAE,CACdX,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC,CAChC,mBAAOf,IAAA,CAACH,QAAQ,EAACW,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CACF,CAAC,CAED,cAAe,CAAAR,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}